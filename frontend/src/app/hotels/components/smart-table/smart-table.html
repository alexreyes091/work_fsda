<div class="flex flex-col gap-4">
  <div class="flex justify-between items-center bg-base-100 p-2 rounded-lg">
    <div class="relative w-full max-w-xs">
      <input 
        type="text" 
        placeholder="Buscar hotel, hu√©sped o email..." 
        class="input input-bordered w-full pr-10"
        [value]="filterText()" 
        (input)="updateSearch($event)" 
      />
      @if (filterText()) {
        <button 
          class="absolute right-2 top-3 btn btn-ghost btn-xs"
          (click)="filterText.set('')">
          ‚úï
        </button>
      }
    </div>
  </div>

  <div class="overflow-x-auto border border-base-300 rounded-box shadow-sm">
    <table class="table table-zebra w-full">
      <thead>
        @for (headerGroup of table.getHeaderGroups(); track headerGroup.id) {
          <tr>
            @for (header of headerGroup.headers; track header.id) {
              <th class="bg-base-200 text-slate-700 font-bold uppercase text-xs">
                @if (!header.isPlaceholder) {
                  <ng-container *flexRender="header.column.columnDef.header; props: header.getContext(); let headerContent">
                    {{ headerContent }}
                  </ng-container>
                }
              </th>
            }
          </tr>
        }
      </thead>
      
      <tbody>
        @for (row of table.getRowModel().rows; track row.id) {
          <tr class="hover transition-colors">
            @for (cell of row.getVisibleCells(); track cell.id) {
              <td class="py-3">
                <ng-container *flexRender="cell.column.columnDef.cell; props: cell.getContext(); let cellContent">
                  {{ cellContent }}
                </ng-container>
              </td>
            }
          </tr>
        } @empty {
          <tr>
            <td [attr.colspan]="columns().length" class="text-center py-12">
              <div class="flex flex-col items-center opacity-40">
                <span class="text-5xl">üîç</span>
                <p class="mt-2 text-lg">No se encontraron resultados para "{{ filterText() }}"</p>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<div class="flex items-center justify-between mt-4 bg-base-100 p-2 rounded-lg border border-base-300">
  <div class="text-sm opacity-70">
    P√°gina {{ table.getState().pagination.pageIndex + 1 }} de {{ table.getPageCount() }}
  </div>

  <div class="join">
    <button 
      class="join-item btn btn-sm" 
      (click)="table.previousPage()" 
      [disabled]="!table.getCanPreviousPage()">
      ¬´
    </button>
    
    <button class="join-item btn btn-sm bg-base-200">
      P√°gina {{ table.getState().pagination.pageIndex + 1 }}
    </button>

    <button 
      class="join-item btn btn-sm" 
      (click)="table.nextPage()" 
      [disabled]="!table.getCanNextPage()">
      ¬ª
    </button>
  </div>

  <select 
    class="select select-bordered select-sm"
    (change)="table.setPageSize(+$any($event.target).value)">
    @for (pageSize of [5, 10, 20]; track pageSize) {
      <option [value]="pageSize" class="text-slate-700">Mostrar {{ pageSize }}</option>
    }
  </select>
</div>